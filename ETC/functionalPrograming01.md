# 함수형 프로그래밍

얼마전까지만해도 쏙쏙 들어오는 함수형 코딩(https://www.yes24.com/Product/Goods/108748841)

이라는 책을 읽고 있었다.

책에서 봤던 내용을 바탕으로 되새겨볼려 한다.


<h1>함수형 프로그래밍 3대요소</h1>

순수함수: 코드를 액션과 계산, 데이터로 분리하자. 특히 액션에서 계산을 분리하는 코드를 작성해야함<br/>
불변성: 카피 온 라이트와 방어적 복사를 이용하여 불변성을 유지<br/>
선언적 패턴: 계층형 설계와 추상화 벽을 이용해, ‘무엇’과 ‘어떻게’를 구분하여 좋은 설계를 유지

<h1>액션, 계산, 데이터</h1>

함수형 프로그래밍은 대개 순수함수(Pure-Function)와 부수효과(Side-effect)의 정의로 시작하며, ‘부수 효과를 멀리하고 순수함수의 합성을 통해서 프로그래밍하자’라고 설명합니다.<br/>
보통 이를 처음 접하면 ‘부수 효과와 가변된 상태를 멀리하고 순수함수로 프로그래밍하라’고 이해합니다.<br/>
하지만 대부분 프로그램의 목적은 부수 효과에 있습니다.<br/>
서버에서 데이터를 조회하고 화면을 변경하고 로그를 남기고 파일을 읽고 쓰는 행위들을 하지 않는 프로그램은 의미가 없습니다.<br/>
순수함수만 가지고는 우리가 만들고자 하는 응용프로그램이 되지 않습니다.

```
액션은 호출 시점과 실행 횟수에 의존합니다.
계산은 입력과 출력으로 이루어져 있습니다.
데이터는 이벤트에 대한 사실입니다.
```

더 쉽게 이해를 할려면

함수형 프로그래밍을 순수함수와 부수 효과가 아니라 액션 - 계산 - 데이터의 관점으로 이해해보면 조금 더 쉽게 이해할 수 있을 것입니다.

프로그램은 곧 데이터의 변화입니다. 그리고 데이터는 액션에 의해 변합니다.<br/>
데이터가 변하는 방법을 따로 독립적으로 계산했을 때<br/>
액션과 계산과 데이터를 함수로 연결하여 작성하는 개념이 바로 ‘함수형 프로그래밍 패러다임’입니다.<br/>
특히 실행 시점과 횟수에 의존적인 액션에서 독립적인 계산을 분리하여, 복잡한 코드를 간단하게 만들고 테스트를 쉽게 만드는 것이 중요합니다.


저는 프론트앤드 개발을 하고 있으니까

제가 보는 방식대로 정리해봅니다.

버튼을 누르면 숫자가 올라가는 카운터 프로그램을 예시로 듭니다.

```js
// 함수형 프로그래밍 관점에서 분리해보자.
function App() {

 // 데이터
 const [count, setCount] = useState(0)

 // 계산
 const increase = (value) => value + 1

 // 액션
 const onClick = () => setCount(increase(count))
 
 // 선언적 패턴
 return <button onClick={onClick}>{count}</button>
}
```

알게모르게 함수형 프로그래밍은 이미 사용하고 있습니다.

하지만 단순한 함수 쪼개기는 액션 - 계산 - 데이터의 분리가 아닙니다.

계산은 반드시 입출력으로 이루어져야 하며, 같은 입력에 대해서는 항상 같은 출력값을 내놓아야 합니다.

함수형 프로그래밍의 핵심은 액션과 계산을 확실히 분리해서 액션을 최소화하고 계산함수를 많이 만들어서 관리하는 것을 목표로 합니다.

```js
const increase = () => {
  ...
  // count는 함수 외부에서 왔으므로 암묵적 입력입니다.
  const result = count + 1 // 1이라는 값은 변경할 수 없는 암묵적 입력입니다. 
  setState(result) // 함수 외부에 있는 값을 변경하는 암묵적 출력입니다.
  ...

  // result는 명시적 출력입니다.
  return result
}

const action = () => {
  ...
  increase()
}
```

하나의 함수에 암묵적 입출력과 명시적 입출력이 섞여 있다면 계산이 아니라 액션입니다.<br/>
액션과 계산이 섞여 있는 함수라면 계산 부분을 분리해야 합니다.

```js
const increase = (count, offset) => {
 const result = count + offset // count와 offset을 명시적 입력으로 변경합니다.
 // setState와 같은 명시적 출력은 사용하지 않습니다.
 return result
}

// 암묵적인 입출력은 별도의 action에 모아줍니다.
const action = () => {
 setState(increase(count, 1)) // 외부에서 필요한 모든 입력을 넣어줍니다.
}
```

이제 이 함수는 언제든 재사용이 가능하며 테스트하기에도 용이합니다.<br/>
계산은 조립해도 언제나 같은 결과를 만들기 때문에 조합에 의한 폭발적인 테스트 시나리오를 만들지 않도록 도와줍니다.<br/>
계산은 명시적인 입력과 출력만을 가지며 어떠한 부수 효과도 만들어내지 않습니다.<br/>
같은 입력에 대해서는 언제나 같은 결과만을 만들어내야 합니다.

<h1>액션 - 계산 - 데이터 정리</h1>

프로그램은 곧 데이터의 변화입니다. 그리고 데이터는 액션에 의해 변합니다.<br/>
데이터가 변하는 방법을 따로 독립적으로 계산했을 때 액션과 계산과 데이터를 함수로 연결하여 작성하는 개념이 바로 ‘함수형 프로그래밍 패러다임’입니다.<br/>
특히 실행 시점과 횟수에 의존적인 액션에서 독립적인 계산을 분리하여, 복잡한 코드를 간단하게 만들고 테스트를 쉽게 만드는 것이 중요합니다.<br/>




추가로 불변성,선언적 패턴에 대해서 다음에 공부후 적겠습니다.